var map;var marker;var positionId;var currentLocation;function moveMap(a){currentLocation=new GLatLng(a.coords.latitude,a.coords.longitude);marker=new GMarker(new GLatLng(a.coords.latitude,a.coords.longitude));GEvent.addListener(marker,"click",function(){var b="Você está mais ou menos aqui.";map.openInfoWindowHtml(currentLocation,b)});map.addOverlay(marker);map.setZoom(15);map.panTo(new GLatLng(a.coords.latitude,a.coords.longitude))}function handleError(a){console.log(a.message)}function initialize(){if(GBrowserIsCompatible()){map=new GMap2(document.getElementById("mapcanvas"));map.setCenter(new GLatLng(37.4419,-122.1419),13);map.addControl(new GSmallMapControl());positionId=navigator.geolocation.watchPosition(moveMap,handleError)}};